import{_ as s,o,c as a,a as e}from"./app.57a3dbd1.js";const m=JSON.parse('{"title":"Agent端","description":"","frontmatter":{"contributors":["ZhouYixun"]},"headers":[{"level":2,"title":"本仓库贡献者","slug":"本仓库贡献者","link":"#本仓库贡献者","children":[]},{"level":2,"title":"搭建步骤","slug":"搭建步骤","link":"#搭建步骤","children":[{"level":3,"title":"v2.4.0后版本","slug":"v2-4-0后版本","link":"#v2-4-0后版本","children":[]},{"level":3,"title":"v2.4.0前版本","slug":"v2-4-0前版本","link":"#v2-4-0前版本","children":[]}]}],"relativePath":"contribute/con-agent.md","lastUpdated":1716537034000}'),i={name:"contribute/con-agent.md"},l=e(`<h1 id="agent端" tabindex="-1">Agent端 <a class="header-anchor" href="#agent端" aria-hidden="true">#</a></h1><p>本文将介绍如何搭建Agent端开发环境。 👉<a href="https://github.com/SonicCloudOrg/sonic-agent" target="_blank" rel="noreferrer">Github地址</a></p><div style="display:flex;"><img src="https://img.shields.io/github/stars/SonicCloudOrg/sonic-agent?style=social"><img style="margin-left:10px;" src="https://img.shields.io/github/forks/SonicCloudOrg/sonic-agent?style=social"><img style="margin-left:10px;" src="https://img.shields.io/github/downloads/SonicCloudOrg/sonic-agent/total"></div><h2 id="本仓库贡献者" tabindex="-1">本仓库贡献者 <a class="header-anchor" href="#本仓库贡献者" aria-hidden="true">#</a></h2><a href="https://github.com/SonicCloudOrg/sonic-agent/graphs/contributors"><img src="https://contrib.rocks/image?repo=SonicCloudOrg/sonic-agent"></a><h2 id="搭建步骤" tabindex="-1">搭建步骤 <a class="header-anchor" href="#搭建步骤" aria-hidden="true">#</a></h2><h3 id="v2-4-0后版本" tabindex="-1">v2.4.0后版本 <a class="header-anchor" href="#v2-4-0后版本" aria-hidden="true">#</a></h3><p><strong>准备工作</strong>：<strong>jdk17</strong>、Idea</p><ol><li>Fork <a href="https://github.com/SonicCloudOrg/sonic-agent" target="_blank" rel="noreferrer">sonic-agent</a> 仓库。</li><li>执行git clone指令，将您的仓库代码克隆到本地。</li><li>根据注释修改config的application-sonic-agent.yml，主要更改server和Agent的<code>host</code>即可。</li><li>默认plugins目录下缺少sonic-ios-bridge、sonic-android-supply和sonic-go-mitmproxy二进制文件，或者存在但是跟您开发环境的平台不一致，可以根据您的开发系统去仓库下载对应的包然后 <strong>重命名</strong> 为对应的名称。</li></ol><div class="tip custom-block"><p class="custom-block-title">注意</p><p>版本要对应resources/application.yml下的版本哦，如果不想下载，将application-sonic-agent.yml的ios、use-sas和sgm的enable改为false。</p></div><ol start="5"><li>如果idea启动，记得更改pom.xml中properties.platform的平台。（旧版本代码只需idea选择对应profile）</li><li>启动AgentApplication。</li><li>恭喜，搭建完毕！</li><li>开发完毕后，push到自己的仓库，然后可以给Sonic原仓库提起pr哦！（建议贡献前先开启issue讨论，防止跟组织计划进度有冲突哦）</li></ol><h4 id="打包" tabindex="-1">打包 <a class="header-anchor" href="#打包" aria-hidden="true">#</a></h4><ol><li>更改pom.xml中properties.platform的平台。platform为您的平台，可选为 windows-x86, windows-x86_64, macosx-arm64, macosx-x86_64, linux-arm64, linux-x86, linux-x86_64</li><li>执行命令</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">mvn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package</span></span>
<span class="line"></span></code></pre></div><h3 id="v2-4-0前版本" tabindex="-1">v2.4.0前版本 <a class="header-anchor" href="#v2-4-0前版本" aria-hidden="true">#</a></h3><p><strong>准备工作</strong>：<strong>jdk15</strong>、Idea</p><ol><li>Fork <a href="https://github.com/SonicCloudOrg/sonic-agent" target="_blank" rel="noreferrer">sonic-agent</a> 仓库。</li><li>执行git clone指令，将您的仓库代码克隆到本地。</li><li>根据注释修改config的application-sonic-agent.yml，开发环境时，<strong>sonic.server.port</strong> 填写为gateway服务端口（默认为8094）。如果是开发环境的Agent连接生产环境的Server，还需将<code>pom.xml</code>中的<code>releaseMode</code>改为 <strong>true</strong>。</li></ol><div class="tip custom-block"><p class="custom-block-title">TIPS: 如果是v2.1.2以下版本</p><p>需要去掉 <strong>org/cloud/sonic/agent/transport/TransportConnectionThread.java</strong> 与 <strong>org/cloud/sonic/agent/tools/file/UploadTools.java</strong> url中的 <strong>/server</strong></p></div><ol start="4"><li>默认plugins目录下缺少sonic-ios-bridge、sonic-android-supply和sonic-go-mitmproxy二进制文件，或者存在但是跟您开发环境的平台不一致，可以根据您的开发系统去仓库下载对应的包然后 <strong>重命名</strong> 为对应的名称。</li></ol><div class="tip custom-block"><p class="custom-block-title">注意</p><p>版本要对应resources/application.yml下的版本哦，如果不想下载，将application-sonic-agent.yml的ios、use-sas和sgm的enable改为false。</p></div><ol start="5"><li>如果idea启动，记得更改pom.xml中properties.platform的平台。（旧版本代码只需idea选择对应profile）</li><li>启动AgentApplication。</li><li>恭喜，搭建完毕！</li><li>开发完毕后，push到自己的仓库，然后可以给Sonic原仓库提起pr哦！（建议贡献前先开启issue讨论，防止跟组织计划进度有冲突哦）</li></ol><h4 id="打包-1" tabindex="-1">打包 <a class="header-anchor" href="#打包-1" aria-hidden="true">#</a></h4><ol><li>更改pom.xml中properties.platform的平台。platform为您的平台，可选为 windows-x86, windows-x86_64, macosx-arm64, macosx-x86_64, linux-arm64, linux-x86, linux-x86_64</li><li>执行命令</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">mvn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-DreleaseMode=true</span></span>
<span class="line"></span></code></pre></div>`,24),t=[l];function n(r,c,p,d,g,h){return o(),a("div",null,t)}const b=s(i,[["render",n]]);export{m as __pageData,b as default};
