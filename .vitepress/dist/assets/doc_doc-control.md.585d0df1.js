import{_ as s,o as a,c as l,a as n}from"./app.57a3dbd1.js";const p="/assets/input.3f40f5a6.mp4",A=JSON.parse('{"title":"控制中心","description":"","frontmatter":{"contributors":["ZhouYixun"]},"headers":[{"level":2,"title":"安卓设备","slug":"安卓设备","link":"#安卓设备","children":[{"level":3,"title":"键盘实时输入","slug":"键盘实时输入","link":"#键盘实时输入","children":[]},{"level":3,"title":"切换投屏模式","slug":"切换投屏模式","link":"#切换投屏模式","children":[]},{"level":3,"title":"切换触控模式","slug":"切换触控模式","link":"#切换触控模式","children":[]},{"level":3,"title":"远程ADB","slug":"远程adb","link":"#远程adb","children":[]},{"level":3,"title":"文件管理","slug":"文件管理","link":"#文件管理","children":[]},{"level":3,"title":"扫描二维码","slug":"扫描二维码","link":"#扫描二维码","children":[]},{"level":3,"title":"重连UIAutomator Server","slug":"重连uiautomator-server","link":"#重连uiautomator-server","children":[]},{"level":3,"title":"远程音频","slug":"远程音频","link":"#远程音频","children":[]},{"level":3,"title":"物理查找","slug":"物理查找","link":"#物理查找","children":[]}]},{"level":2,"title":"iOS设备","slug":"ios设备","link":"#ios设备","children":[{"level":3,"title":"切换清晰度","slug":"切换清晰度","link":"#切换清晰度","children":[]},{"level":3,"title":"键盘输入（同安卓）","slug":"键盘输入-同安卓","link":"#键盘输入-同安卓","children":[]},{"level":3,"title":"Siri指令","slug":"siri指令","link":"#siri指令","children":[]},{"level":3,"title":"模拟定位","slug":"模拟定位","link":"#模拟定位","children":[]},{"level":3,"title":"剪切板操作","slug":"剪切板操作","link":"#剪切板操作","children":[]},{"level":3,"title":"远程WDA","slug":"远程wda","link":"#远程wda","children":[]},{"level":3,"title":"远程sib","slug":"远程sib","link":"#远程sib","children":[]}]}],"relativePath":"doc/doc-control.md","lastUpdated":1716537034000}'),e={name:"doc/doc-control.md"},o=n('<h1 id="控制中心" tabindex="-1">控制中心 <a class="header-anchor" href="#控制中心" aria-hidden="true">#</a></h1><p>这里是关于远程控制设备的基础功能介绍。</p><h2 id="安卓设备" tabindex="-1">安卓设备 <a class="header-anchor" href="#安卓设备" aria-hidden="true">#</a></h2><h3 id="键盘实时输入" tabindex="-1">键盘实时输入 <a class="header-anchor" href="#键盘实时输入" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>该功能需升级至Sonic v2.0.3</p></div><p>远程控制设备时。</p><ol><li>鼠标点击到投屏区域内。（如果鼠标再次点击投屏区域外，将停止监听键盘输入）</li><li>使用你的电脑键盘直接对网页输入文字。</li><li>可以直接发送对应文本到手机里面，支持删除与回车键。</li></ol><video class="capacity-video" controls src="'+p+`"></video><div class="warning custom-block"><p class="custom-block-title">注意</p><p>升级至Sonic v2.3.0后，可以直接点击Sonic输入法下方灰色区域快速跳转到系统输入法设置页进行输入法切换。</p></div><h3 id="切换投屏模式" tabindex="-1">切换投屏模式 <a class="header-anchor" href="#切换投屏模式" aria-hidden="true">#</a></h3><p>安卓投屏有目前版本有两种模式，分别是minicap模式与scrcpy模式（默认）。</p><p>scrcpy已支持安卓5-13大部分机型，minicap支持安卓4.4-12机型。</p><p>当所选投屏模式与您的设备不兼容时，可以点击投屏区域右侧工具栏来切换投屏模式。</p><p>当minicap模式下，部分三星手机投屏区域出现黑边时，可以尝试使用投屏区域右侧工具栏的【修复黑屏】解决。</p><h3 id="切换触控模式" tabindex="-1">切换触控模式 <a class="header-anchor" href="#切换触控模式" aria-hidden="true">#</a></h3><p>安卓触控目前版本有两种模式，分别是sonic-android-apk触控与adb原生触控。</p><p>安卓投屏触控默认使用 <a href="https://sonic-cloud.cn/saa" target="_blank" rel="noreferrer">sonic-android-apk</a> 实现实时触控，解决了minitouch在安卓10以上无法实时使用的场景。但是部分特殊情况下，当sonic-android-apk不可用时，可以点击投屏区域右侧工具栏的【修复触控】切换为adb原生触控。</p><h3 id="远程adb" tabindex="-1">远程ADB <a class="header-anchor" href="#远程adb" aria-hidden="true">#</a></h3><p>远程ADB功能自 <strong>v2.0.0-beta</strong> 开始依赖 sonic-android-supply 实现，不再使用 adbkit。可以用ADB远程连接对应设备到本地，可以用于执行测试任务或开发调试等等场景。</p><p>例如用户自己本地有ADB，则可以复制远程ADB界面的指令到本地执行：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.xxx.xxx.xxx:xxxx</span></span>
<span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">devices</span></span>
<span class="line"></span></code></pre></div><p>你会看到类似输出</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">List</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">devices</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attached</span></span>
<span class="line"><span style="color:#FFCB6B;">xxx.xxx.xxx.xxx:xxxx</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">device</span></span>
<span class="line"></span></code></pre></div><p>完成！设备已经从Agent连接到用户本地的ADB了，后续可以使用ADB相关指令操作设备。例如查看设备分辨率：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size</span></span>
<span class="line"></span></code></pre></div><h3 id="文件管理" tabindex="-1">文件管理 <a class="header-anchor" href="#文件管理" aria-hidden="true">#</a></h3><p>可以上传和拉取文件。</p><ol><li>上传文件后，路径需要加上文件名，如上传abc.jpg到/data/local/tmp，则填写/data/local/tmp/123.jpg。</li><li>拉取文件时，仅支持单文件操作，如拉取/data/local/tmp/123.jpg，则填写/data/local/tmp/123.jpg。</li></ol><h3 id="扫描二维码" tabindex="-1">扫描二维码 <a class="header-anchor" href="#扫描二维码" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>部分OPPO、vivo和子品牌设备需要重启后才能生效。</p></div><p>需要扫描二维码时，可以将二维码图片上传到对应位置，然后扫码时打开相册就能找到对应二维码。</p><h3 id="重连uiautomator-server" tabindex="-1">重连UIAutomator Server <a class="header-anchor" href="#重连uiautomator-server" aria-hidden="true">#</a></h3><p>当默认初始化失败后，需要调整对应的设置，可以前往 <a href="https://sonic-cloud.cn/deploy/android-deploy.html" target="_blank" rel="noreferrer">这里</a> 检查配置。然后点击【初始化UIAutomator2Server】直至Status为Connected为止。</p><h3 id="远程音频" tabindex="-1">远程音频 <a class="header-anchor" href="#远程音频" aria-hidden="true">#</a></h3><p>远程音频功能目前依赖 <a href="https://sonic-cloud.cn/saa/re-saa.html" target="_blank" rel="noreferrer">sonic-android-apk</a> 实现实时音频传输，开启后可以直接在网页上播放远程设备的实时音频。</p><p>如果开启后没有音频，可以检查设备是否开启了 sonic-android-apk 的通知栏权限等等，确保 sonic-android-apk 拥有所有权限。</p><h3 id="物理查找" tabindex="-1">物理查找 <a class="header-anchor" href="#物理查找" aria-hidden="true">#</a></h3><p>该功能用于设备集群时，设备数量太多导致找物理机器繁琐而设。点击后设备会开启蓝色背景并高亮设备屏幕，易于物理检查时能快速查找对应设备。</p><h2 id="ios设备" tabindex="-1">iOS设备 <a class="header-anchor" href="#ios设备" aria-hidden="true">#</a></h2><h3 id="切换清晰度" tabindex="-1">切换清晰度 <a class="header-anchor" href="#切换清晰度" aria-hidden="true">#</a></h3><p>iOS投屏默认使用mjpeg流，默认为高画质。如果您想减轻带宽压力，可以在右侧工具栏切换低画质，可以减少大部分带宽，但画质与帧率也会因此下降。</p><h3 id="键盘输入-同安卓" tabindex="-1">键盘输入（同安卓） <a class="header-anchor" href="#键盘输入-同安卓" aria-hidden="true">#</a></h3><p>远程控制设备时。</p><ol><li>鼠标点击到投屏区域内。（如果鼠标再次点击投屏区域外，将停止监听键盘输入）</li><li>使用你的电脑键盘直接对网页输入文字。</li><li>可以直接发送对应文本到手机里面。</li></ol><h3 id="siri指令" tabindex="-1">Siri指令 <a class="header-anchor" href="#siri指令" aria-hidden="true">#</a></h3><p>可以发送Siri指令给iOS设备。如：</p><ol><li>打开浏览器</li><li>今天星期几</li><li>打开设置</li></ol><p>还有很多有趣的Siri指令欢迎探索</p><h3 id="模拟定位" tabindex="-1">模拟定位 <a class="header-anchor" href="#模拟定位" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>目前发现部分应用不生效。</p></div><p>可以模拟设备所在位置的地理位置，输入经纬度可精确到小数点后五位。</p><h3 id="剪切板操作" tabindex="-1">剪切板操作 <a class="header-anchor" href="#剪切板操作" aria-hidden="true">#</a></h3><p>支持直接获取设备的剪切板内容与设置.</p><p>设置后需要在设备上长按点击粘贴。</p><h3 id="远程wda" tabindex="-1">远程WDA <a class="header-anchor" href="#远程wda" aria-hidden="true">#</a></h3><p>WDA远程调试连接对外使用。</p><p>例如用户自己本地有Appium，远程WDA链接为<a href="http://192.168.1.1:12345" target="_blank" rel="noreferrer">http://192.168.1.1:12345</a> ，则可以:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">DesiredCapabilities</span><span style="color:#A6ACCD;"> desiredCapabilities </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DesiredCapabilities</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PLATFORM_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Platform</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IOS</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AUTOMATION_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> AutomationName</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IOS_XCUI_TEST</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NEW_COMMAND_TIMEOUT</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3600</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">IOSMobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">COMMAND_TIMEOUTS</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3600</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NO_RESET</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 填写设备名称, 也可以通过sib获取</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DEVICE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My Phone</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">UDID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> udId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wdaConnectionTimeout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">IOSMobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WEB_DRIVER_AGENT_URL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://192.168.1.1:12345</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">useXctestrunFile</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">IOSMobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SHOW_IOS_LOG</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">IOSMobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SHOW_XCODE_LOG</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">skipLogCapture</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true);</span></span>
<span class="line"><span style="color:#A6ACCD;">desiredCapabilities</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCapability</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">IOSMobileCapabilityType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">USE_PREBUILT_WDA</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">IOSDriver</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:4723/wd/hub</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> desiredCapabilities</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>完成！设备已经从Agent连接到你本地的Appium了</p><h3 id="远程sib" tabindex="-1">远程sib <a class="header-anchor" href="#远程sib" aria-hidden="true">#</a></h3><p>可以在另一个电脑上使用sib控制当前设备。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remote</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">share</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">share</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">por</span><span style="color:#A6ACCD;">t</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>连接成功后，可以远程发起sib指令操作，如：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">perfmon</span></span>
<span class="line"></span></code></pre></div>`,64),t=[o];function r(i,c,D,y,C,d){return a(),l("div",null,t)}const h=s(e,[["render",r]]);export{A as __pageData,h as default};
