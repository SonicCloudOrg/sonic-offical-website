import{_ as a,o as s,c as e,a as n}from"./app.57a3dbd1.js";const D=JSON.parse('{"title":"AndroidDriver","description":"","frontmatter":{"contributors":["ZhouYixun"]},"headers":[{"level":2,"title":"设备前置配置","slug":"设备前置配置","link":"#设备前置配置","children":[]},{"level":2,"title":"剪切板操作","slug":"剪切板操作","link":"#剪切板操作","children":[{"level":3,"title":"设置剪切板","slug":"设置剪切板","link":"#设置剪切板","children":[]},{"level":3,"title":"获取剪贴板","slug":"获取剪贴板","link":"#获取剪贴板","children":[]}]},{"level":2,"title":"更多文档建设中...","slug":"更多文档建设中","link":"#更多文档建设中","children":[]}],"relativePath":"sdc/sdc-android.md","lastUpdated":1716537034000}'),l={name:"sdc/sdc-android.md"},o=n(`<h1 id="androiddriver" tabindex="-1">AndroidDriver <a class="header-anchor" href="#androiddriver" aria-hidden="true">#</a></h1><p>本文是AndroidDriver文档。 API文档可前往：👉<a href="https://s01.oss.sonatype.org/service/local/repositories/releases/archive/io/github/soniccloudorg/sonic-driver-core/1.1.29/sonic-driver-core-1.1.29-javadoc.jar/!/index.html" target="_blank" rel="noreferrer">Java Doc</a></p><h2 id="设备前置配置" tabindex="-1">设备前置配置 <a class="header-anchor" href="#设备前置配置" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">注意</p><p>自动化的前置配置Agent已自动安装、检测与转发，如果在您的项目中单独使用sonic-driver-core，请往下翻阅。</p></div><p>首次使用安卓需先安装两个uia2依赖（可以前往 <a href="https://github.com/SonicCloudOrg/sonic-appium-uiautomator2-server" target="_blank" rel="noreferrer">appium-uiautomator2-server</a> 自行构建，仅支持v5.x版本，也可以前往 <a href="https://github.com/SonicCloudOrg/sonic-agent/tree/main/plugins" target="_blank" rel="noreferrer">这个</a> 目录下下载对应apk）</p><ol><li>appium-uiautomator2-server.apk</li><li>appium-uiautomator2-server-test.apk</li></ol><p>安装后，执行命令</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">am</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">instrument</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">io.appium.uiautomator2.server.test/androidx.test.runner.AndroidJUnitRunner</span></span>
<span class="line"></span></code></pre></div><p>然后转发服务端口</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">adb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">forward</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp:</span><span style="color:#F78C6C;">6790</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp:</span><span style="color:#F78C6C;">6790</span></span>
<span class="line"></span></code></pre></div><p>然后就可以启动Driver</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">AndroidDriver</span><span style="color:#A6ACCD;"> androidDriver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AndroidDriver</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:6790</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><h2 id="剪切板操作" tabindex="-1">剪切板操作 <a class="header-anchor" href="#剪切板操作" aria-hidden="true">#</a></h2><h3 id="设置剪切板" tabindex="-1">设置剪切板 <a class="header-anchor" href="#设置剪切板" aria-hidden="true">#</a></h3><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">androidDriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setPasteboard</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> contentType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> content</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><h3 id="获取剪贴板" tabindex="-1">获取剪贴板 <a class="header-anchor" href="#获取剪贴板" aria-hidden="true">#</a></h3><p>注意，该API仅在安卓10以下生效。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">androidDriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPasteboard</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> contentType</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>如果需要获取安卓10以上设备，可以前往 <a href="https://sonic-cloud.cn/saa/saa-clipper.html#%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8" target="_blank" rel="noreferrer">这里</a></p><h2 id="更多文档建设中" tabindex="-1">更多文档建设中... <a class="header-anchor" href="#更多文档建设中" aria-hidden="true">#</a></h2>`,20),r=[o];function t(p,i,c,d,h,C){return s(),e("div",null,r)}const y=a(l,[["render",t]]);export{D as __pageData,y as default};
