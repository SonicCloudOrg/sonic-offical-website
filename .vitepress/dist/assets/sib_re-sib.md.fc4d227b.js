import{_ as s,o as i,c as e,a as o}from"./app.57a3dbd1.js";const u=JSON.parse('{"title":"sonic-ios-bridge","description":"","frontmatter":{"contributors":["ZhouYixun"]},"headers":[{"level":2,"title":"本仓库贡献者","slug":"本仓库贡献者","link":"#本仓库贡献者","children":[]},{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"注意事项","slug":"注意事项","link":"#注意事项","children":[]},{"level":2,"title":"快速使用","slug":"快速使用","link":"#快速使用","children":[]},{"level":2,"title":"名词解释","slug":"名词解释","link":"#名词解释","children":[]},{"level":2,"title":"常见问题（Q&A）","slug":"常见问题-q-a","link":"#常见问题-q-a","children":[]},{"level":2,"title":"鸣谢","slug":"鸣谢","link":"#鸣谢","children":[]}],"relativePath":"sib/re-sib.md","lastUpdated":1716537034000}'),a={name:"sib/re-sib.md"},t=o(`<h1 id="sonic-ios-bridge" tabindex="-1">sonic-ios-bridge <a class="header-anchor" href="#sonic-ios-bridge" aria-hidden="true">#</a></h1><p>本文为跨平台iOS调试工具sonic-ios-bridge（sib）的介绍与原理简述。 👉<a href="https://github.com/SonicCloudOrg/sonic-ios-bridge" target="_blank" rel="noreferrer">Github地址</a></p><div style="display:flex;"><img src="https://img.shields.io/github/stars/SonicCloudOrg/sonic-ios-bridge?style=social"><img style="margin-left:10px;" src="https://img.shields.io/github/forks/SonicCloudOrg/sonic-ios-bridge?style=social"><img style="margin-left:10px;" src="https://img.shields.io/github/downloads/SonicCloudOrg/sonic-ios-bridge/total"></div><h2 id="本仓库贡献者" tabindex="-1">本仓库贡献者 <a class="header-anchor" href="#本仓库贡献者" aria-hidden="true">#</a></h2><a href="https://github.com/SonicCloudOrg/sonic-ios-bridge/graphs/contributors"><img src="https://contrib.rocks/image?repo=SonicCloudOrg/sonic-ios-bridge"></a><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-hidden="true">#</a></h2><p><strong>sonic-ios-bridge</strong> 是基于 <a href="https://github.com/electricbubble/gidevice" target="_blank" rel="noreferrer">gidevice</a> 作为底层iOS通信协议，在此基础上丰富了周边辅助功能，如自动挂载开发者镜像、wda安装检测、iOS型号映射、命令行直接使用等等。 以打造跨平台执行xctest、WebDriverAgentRunner、性能监听等等特色功能的命令行iOS调试工具。</p><div class="info custom-block"><p class="custom-block-title">关于gidevice共建</p><p>Sonic组织也在持续将iOS通信的探索 <strong>共建</strong> 到gidevice上，Sonic会先在 <a href="https://github.com/SonicCloudOrg/sonic-gidevice" target="_blank" rel="noreferrer">sonic-gidevice</a> 建设，等feat稳定之后通过 <strong>feat/contribute_to_repo</strong> 分支提交到原gidevice仓库，以下是Sonic组织目前参与建设的提交：</p><ol><li>新增DiagnosticsRelay实现设备关机与重启。<a href="https://github.com/electricbubble/gidevice/commit/ad436febc507a655ddd5de4720e6b0843bf45b16" target="_blank" rel="noreferrer">feat: [DiagnosticsRelay] new functions Reboot Shutdown</a></li><li>新增SpringBoardServices与App图标获取。<a href="https://github.com/electricbubble/gidevice/commit/a31cdff57d0fc234acf4a57d6f707a7b67a23f8d" target="_blank" rel="noreferrer">feat: [SpringBoard] support get the app&#39;s icon</a></li><li>扩展SpringBoardServices获取屏幕旋转方向。<a href="https://github.com/electricbubble/gidevice/commit/e787834515aabaacdf9208953625dd48af8d8514" target="_blank" rel="noreferrer">feat: [SpringBoard] support get the orientation of the interface</a></li><li>增加性能数据方法。<a href="https://github.com/electricbubble/gidevice/commit/8bef4cc76426c263212df7ea13dd7823914c4c1b" target="_blank" rel="noreferrer">feat: 增加性能数据方法</a></li></ol></div><p>所以您可以使用sib脱离Mac进行 <strong>跨端iOS自动化</strong> 、<strong>iOS设备通信</strong>、<strong>iOS设备测试</strong> 。</p><p>无论是 gidevice 还是 tidevice ，主要原理是与usbmux通信。 usbmux的作用是实现跨平台与iOS设备服务的通信。 在Mac上usbmuxd是苹果的一个服务，主要用于在USB协议上实现TCP连接。iTunes、Xcode都有用到了这个服务，所以Windows系统需要安装iTunes。</p><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-hidden="true">#</a></h2><p>已知设备部分功能需要 <strong>挂载开发者镜像</strong>，又因为执行xctest（包括wda）时检查挂载镜像会造成<strong>阻塞</strong>问题，所以sib在 <strong>1.3.7版本开始</strong> 不再自动检查挂载状态与自动挂载。因此部分功能单独使用前需要手动挂载开发者镜像，可以使用 <a href="https://sonic-cloud.cn/sib/sib-mount.html" target="_blank">这个指令</a> 自行挂载。</p><p>目前已知挂载状态变更如下：</p><ol><li>设备 <strong>首次使用</strong> 或 <strong>重启</strong> 后，挂载状态会被重置。</li><li>挂载状态被重置前只要挂载<strong>一次</strong>，就不再需要挂载。</li></ol><p>✨当然如果您有更好的方法解决这个问题，欢迎发起pr请求一同建设✨</p><h2 id="快速使用" tabindex="-1">快速使用 <a class="header-anchor" href="#快速使用" aria-hidden="true">#</a></h2><ol><li>选择下方 <strong>PC对应的平台压缩包</strong> 下载并解压到任意目录。如 <strong>加速链接失效</strong> 或 <strong>想查找旧版本</strong>，请前往 <a href="https://github.com/SonicCloudOrg/sonic-ios-bridge/releases" target="_blank">这里</a> 下载</li></ol><div class="info custom-block"><p class="custom-block-title">Linux:</p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_linux_arm64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_linux_arm64.tar.gz</a></p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_linux_x86.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_linux_x86.tar.gz</a></p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_linux_x86_64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_linux_x86_64.tar.gz</a></p></div><div class="info custom-block"><p class="custom-block-title">Macosx:</p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_macosx_arm64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_macosx_arm64.tar.gz</a></p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_macosx_x86_64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_macosx_x86_64.tar.gz</a></p></div><div class="info custom-block"><p class="custom-block-title">Windows:</p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_windows_arm64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_windows_arm64.tar.gz</a></p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_windows_x86.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_windows_x86.tar.gz</a></p><p>👉 <a href="https://ghproxy.com/https://github.com/SonicCloudOrg/sonic-ios-bridge/releases/download/v1.3.18/sonic-ios-bridge_1.3.18_windows_x86_64.tar.gz" target="_blank">sonic-ios-bridge_1.3.18_windows_x86_64.tar.gz</a></p></div><ol start="2"><li>执行指令（Windows不需要，但是Windows需要安装iTunes）。</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">777</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sib</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>执行指令有输出版本号即可（Windows不需要./）。</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>🎉恭喜！您已经可以开始使用了！请移步到功能列表，如果Mac弹出安全弹窗，可以查看下方常见问题。</li><li>（附）如果想任意目录下都可以使用sib，需要将sib路径添加到系统环境变量PATH中。</li></ol><h2 id="名词解释" tabindex="-1">名词解释 <a class="header-anchor" href="#名词解释" aria-hidden="true">#</a></h2><ol><li><strong>flags</strong> 意为当前指令可用的子命令，例：</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">devices</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">listen</span></span>
<span class="line"></span></code></pre></div><p>那么 listen 就是 devices 命令的子命令。</p><ol start="2"><li><strong>option</strong> 意为当前指令可用选项，例如：</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">devcies</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span></code></pre></div><p>那么 -d 就是 devices 命令的选项。</p><h2 id="常见问题-q-a" tabindex="-1">常见问题（Q&amp;A） <a class="header-anchor" href="#常见问题-q-a" aria-hidden="true">#</a></h2><p>Q1: 为什么有的版本的Agent的plugins目录下的是sonic-ios-bridge.exe而不是sib.exe？</p><p>A1: 其实是同一个东西，只是Agent的我方便用户辨认，更改了文件名，实际上作用是一样的。</p><hr><p>Q2: Windows上使用为什么报超时问题？</p><p>A2: Windows没有自带usbmuxd，需要安装iTunes哦。</p><hr><p>Q3: Mac上使用会有安全弹窗？</p><p>A3: Mac：系统偏好设置 -&gt; 安全性与隐私 -&gt; 通用，点击信任或仍要打开。</p><hr><p>Q4: 执行时报错 receive packet: InvalidService 之类的字样</p><p>A4: 设备在首次使用或者重启后部分功能需要先挂载开发者镜像（除了运行xctest或wda会自动挂载外），可执行sib mount解决。</p><hr><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>更多疑问可前往 👉<a href="https://discord.gg/c9ZD6jSyTE" target="_blank" rel="noreferrer">社区</a>👈 交流</p></div><h2 id="鸣谢" tabindex="-1">鸣谢 <a class="header-anchor" href="#鸣谢" aria-hidden="true">#</a></h2><ul><li><a href="https://github.com/electricbubble/gidevice" target="_blank" rel="noreferrer">https://github.com/electricbubble/gidevice</a></li><li><a href="https://github.com/libimobiledevice/libimobiledevice" target="_blank" rel="noreferrer">https://github.com/libimobiledevice/libimobiledevice</a></li><li><a href="https://github.com/danielpaulus/go-ios" target="_blank" rel="noreferrer">https://github.com/danielpaulus/go-ios</a></li></ul>`,48),r=[t];function n(l,c,d,p,g,b){return i(),e("div",null,r)}const _=s(a,[["render",n]]);export{u as __pageData,_ as default};
