import{_ as e,o as s,c as t,a as n}from"./app.57a3dbd1.js";const o="/assets/ios1.79c479c1.png",a="/assets/ios2.f422d7f7.png",i="/assets/ios3.188ef65f.png",A=JSON.parse('{"title":"iOS device access","description":"","frontmatter":{"contributors":["ZhouYixun","soniclei","shinyvince"]},"headers":[{"level":2,"title":"Access common configuration","slug":"access-common-configuration","link":"#access-common-configuration","children":[]},{"level":2,"title":"iOS16 special configuration","slug":"ios16-special-configuration","link":"#ios16-special-configuration","children":[]},{"level":2,"title":"Build WebDriverAgent into the device","slug":"build-webdriveragent-into-the-device","link":"#build-webdriveragent-into-the-device","children":[]},{"level":2,"title":"Build the ipa file","slug":"build-the-ipa-file","link":"#build-the-ipa-file","children":[]},{"level":2,"title":"Frequently Asked Questions (Q&A)","slug":"frequently-asked-questions-q-a","link":"#frequently-asked-questions-q-a","children":[]}],"relativePath":"en/deploy/ios-deploy.md","lastUpdated":1716537034000}'),l={name:"en/deploy/ios-deploy.md"},r=n(`<h1 id="ios-device-access" tabindex="-1">iOS device access <a class="header-anchor" href="#ios-device-access" aria-hidden="true">#</a></h1><p>This article will introduce the preparations for connecting iOS devices to Sonic.</p><h2 id="access-common-configuration" tabindex="-1">Access common configuration <a class="header-anchor" href="#access-common-configuration" aria-hidden="true">#</a></h2><ol><li>Connect the device to the computer via USB</li><li>Click„ÄêTrust„ÄëComputer</li><li>Build WebDriverAgent into the device (required for the first connection, please refer to the construction tutorial below)</li><li>Settings related to webpage debugging: Settings ‚Üí Safari ‚Üí Advanced ‚Üí Open [Webpage Inspector]</li><li>Turn off the phone lock screen password: Settings ‚Üí Face ID and password ‚Üí turn off the password (if it is not turned off, the sonic may always display the connection and the phone is blocked on the password input page when using it remotely)</li></ol><h2 id="ios16-special-configuration" tabindex="-1">iOS16 special configuration <a class="header-anchor" href="#ios16-special-configuration" aria-hidden="true">#</a></h2><p>iOS16 needs to manually enable the developer options.</p><ol><li>Open Settings and enter [Privacy and Security].</li><li>Click [Developer Mode].</li><li>If a pop-up prompting to restart appears, click Restart.</li><li>If you are asked whether to enable the developer mode after startup, click Open.</li></ol><h2 id="build-webdriveragent-into-the-device" tabindex="-1">Build WebDriverAgent into the device <a class="header-anchor" href="#build-webdriveragent-into-the-device" aria-hidden="true">#</a></h2><p>Build wda to your iOS device.</p><div class="tip custom-block"><p class="custom-block-title">note</p><p>After the build is successful, it can be separated from the Mac, and the iOS device can also be used on the Agent of Windows or Linux. Prepare a personal free certificate (expires in 7 days), preferably with a developer account.</p></div><p>Preparations: Mac, Xcode, developer account.</p><ol><li>Pull the WebDriverAgent project of Sonic. (This project corresponds to the v6.1.1 version of appium/WebDriverAgent. Since 7.x has some destructive updates to the touch API, the Sonic organization temporarily retains this version as the basis.)</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/SonicCloudOrg/sonic-ios-wda.git</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>Change the Signing Team in <strong>WebDriverAgentLib</strong> and <strong>WebDriverAgentRunner</strong> to your own developer account.</li></ol><p><img src="`+o+'" alt="ios1"></p><ol start="3"><li>Modify <strong>Product Bundle Identifier</strong> in Build Settings in <strong>WebDriverAgentRunner</strong> For your own custom package name (preferably keep the end of WebDriverAgentRunner)</li></ol><p><img src="'+a+'" alt="ios2"></p><div class="warning custom-block"><p class="custom-block-title">note</p><p>Some Xcode versions will reset the signed Team after modifying the package name, and the signature in the second step needs to be changed again</p></div><ol start="4"><li>Select <strong>WebDriverAgentRunner</strong> as the build target for Scheme, and select the target device on the right. Then select Product -&gt; Build to build. if you want to test Whether WebDriverAgent can run normally, you can also select Product -&gt; Test to view the operation log.</li></ol><p><img src="'+i+`" alt="ios3"></p><div class="warning custom-block"><p class="custom-block-title">note</p><p>If there is an error building to the phone, it may be caused by not having a trusted certificate. After connecting to the network, please trust it in Settings--General--Description File and Management.</p></div><ol start="5"><li>Build complete! You can configure the corresponding custom BundleId in the yml file in the config folder on the Agent side.</li></ol><div class="tip custom-block"><p class="custom-block-title">note</p><p>After the access is completed, you can use iOS without the Mac (Windows needs to install iTunes). If the certificate expires, you need to re-use the Mac to install the certificate</p></div><h2 id="build-the-ipa-file" tabindex="-1">Build the ipa file <a class="header-anchor" href="#build-the-ipa-file" aria-hidden="true">#</a></h2><p>If you only want to build it once and then package it into wda.ipa to share with other devices, you can refer to this method.</p><p>The phone udId must be under the developer account.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xcodebuild</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build-for-testing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-scheme</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">WebDriverAgentRunner</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-sdk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iphoneos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-configuration</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Release</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-derivedDataPath</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/tmp/derivedDataPath</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/tmp/derivedDataPath</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Build/Products/Release-iphoneos</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Payload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.app</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Payload</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">WDA.ipa</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Payload</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">WDA.ipa</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For the use of sib, you can go to the surrounding ecology.</p></div><h2 id="frequently-asked-questions-q-a" tabindex="-1">Frequently Asked Questions (Q&amp;A) <a class="header-anchor" href="#frequently-asked-questions-q-a" aria-hidden="true">#</a></h2><p>Q1: Failed to start after packaging wda.</p><p>A1: Please check whether the bundleId configured in yml is consistent, whether the device trusts the certificate, and whether the device trusts the computer.</p><hr><p>Q2: No screen appears after use, but the key operation is normal.</p><p>A1: The solution can refer to <a href="https://sonic-cloud.wiki/d/27-ios" target="_blank" rel="noreferrer">this post</a>.</p><hr><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For more questions, please go to üëâ<a href="https://discord.gg/c9ZD6jSyTE" target="_blank" rel="noreferrer">Community</a>üëà to communicate</p></div>`,36),c=[r];function p(d,h,u,y,g,C){return s(),t("div",null,c)}const D=e(l,[["render",p]]);export{A as __pageData,D as default};
